<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Audio Visualizer</title>
	<link rel = "stylesheet" type = "text/css" href = "css/generated.css" />
	<link rel = "stylesheet" type = "text/css" href = "css/ui.css" />
	<style>

	html, body {
  		width:  	100%;
  		height: 	100%;
  		margin: 	0px;
  		overflow: 	hidden;
	}
    canvas {
        background: #f2f2f2;
        z-index: -999;
        position: fixed;
    }


	</style>
	<script type="text/javascript" src="src/audiomanager.js"></script>
	<script type="text/javascript" src="src/uimanager.js"></script>
	<script type="text/javascript" src="src/visualizermanager.js"></script>
	<script type="text/javascript" src="src/workspace.js"></script>
	<script>

	var tracks = ["Berlin", "Radio Protector", "Seatbelt Hands", "We Can Make The World Stop", "Yuna's Ballad", "Fireflies and Empty Skies"];
	(function(){
		"use strict";

		function init(){			
			application.audio.initializeAudio();
			application.audio.setStream("tracks/Berlin.mp3");
			application.ui.initializeUI();
			application.visualizer.initializeVisualizer();

			// start animation loop
			update();
		}
				
		function update() { 
			// animate at 60fps
			requestAnimationFrame(update);

			application.visualizer.update();
			
		} 
		
		 // FULL SCREEN MODE
		function requestFullscreen(element) {
			if (element.requestFullscreen) {
			  element.requestFullscreen();
			} else if (element.mozRequestFullscreen) {
			  element.mozRequestFullscreen();
			} else if (element.mozRequestFullScreen) { // camel-cased 'S' was changed to 's' in spec
			  element.mozRequestFullScreen();
			} else if (element.webkitRequestFullscreen) {
			  element.webkitRequestFullscreen();
			}
			// .. and do nothing if the method is not supported
		};
		
		
		window.onload=init;
	}());
		
	</script>
</head>
<body>
	<canvas id="canvas"></canvas>
	<div id="bottomsensor">
		<section id="controls" class = "slide" >
			<div id="controlsBG"></div>
			<!-- These are all positioned absolutely, so it doesn't matter what order they're in, but I put them from left to right to satisfy my own neurosis. -->
			<button id = "showOptionsButton" title="Show/Hide Settings Menu"> <img src="media/hamburglarwhite.png" height=40 width=40 alt="Show Options"> </button>
			<div id="playbackControls">
				<button id="playButton" type="button"><img src="media/playcirclewhite.png" height=30 width=30 alt="Play"></button>
				<div id="trackControl" >
					<ul id="trackList" class="slide" > </ul>
					<div id="trackSelect">
						<span id="currentTrack">Select a Track</span>
					</div>
				</div>
				<span id="volumeControl">
					<label for="volumeSlider" id = "volumeIcon"><img src="media/volumeiconwhite.png" height=20 width=20 alt="Volume"/> </label>
					<input id="volumeSlider" class="slider" type ="range" min ="0" max="1.0" step =".001" value =".2"/>
				</span>
			</div>
			<button id="hideButton" title="Pin/Unpin the Control Panel" type="button"><img src="media/unpinwhite.png" height=30 width=30 alt="Unpin Controls"></button>
		</section>
	</div>
	<section id="options" class="slide">
		<section id="equalizerSettings">
			<header> Equalizer Settings </header>
			<div id="gainControl" class="eqControl">
				<label for="gainSlider" id = "gainLabel">Gain</label>
				<input id="gainSlider" class="slider" type ="range" min ="0" max="2.0" step =".01" value ="1"/>
			</div>
			<!-- pabst blue ribbon control -->
			<!-- alternatively, physically based rendering control if you're a NERD -->
			<!-- it's actually playback rate though -->
			<div id="pbrControl" class="eqControl">
				<label for="pbrSlider" id = "pbrLabel">Playback Rate</label>
				<input id="pbrSlider" class="slider" type ="range" min ="-2" max="2" step =".01" value ="1"/>
			</div>
			<div id="bassControl" class="eqControl">
				<label for="bassSlider" id = "bassLabel">Bass</label>
				<input id="bassSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="lowControl" class="eqControl">
				<label for="lowSlider" id = "lowLabel">Low</label>
				<input id="lowSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="midControl" class="eqControl">
				<label for="midSlider" id = "midLabel">Mid</label>
				<input id="midSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="highControl" class="eqControl">
				<label for="highSlider" id = "highLabel">High</label>
				<input id="highSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="presenceControl" class="eqControl">
				<label for="presenceSlider" id = "highLabel">Presence</label>
				<input id="presenceSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="brillianceControl" class="eqControl">
				<label for="brillianceSlider" id = "brillianceLabel">Brilliance</label>
				<input id="brillianceSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="reverbControl" class="eqControl">
				<label for="reverbSlider" id = "reverbLabel">Reverb</label>
				<input id="reverbSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
		</section>
		<section id="visualizationSettings">
			<header> Visualization Settings </header>
			<div id="bezierCurveSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="bezierCurveCheckbox" /><label for="bezierCurveCheckbox"></label>
				</span>
				<span id="bezierCurveLabel" class="optLabel"> Bezier Curves</span>
				<button type="button" class="expandButton"> </button>
				<div id="bezierCurveAdvanced" class="advancedOptions slidehorizontal">
					<div class = "colorOption">
						<header class="optionHeader">Color</header>
						<span class="colorRadioButtons">
  							<input id="bezierRGBColor" class="colorRadio" type="radio" name="bezierColor" checked>
  							<label for="bezierRGBColor"><span><span></span></span>RGB</label>
  							<input id="bezierHSLColor" class="colorRadio" type="radio" name="bezierColor">
  							<label for="bezierHSLColor"><span><span></span></span>HSL</label>
  							<input id="bezierHexColor" class="colorRadio" type="radio" name="bezierColor">
  							<label for="bezierHexColor"><span><span></span></span>Hex</label>
  						</span>
  						<div class="colorPicker">

  						</div>
  						<span class="colorPreview"> Preview </span>
					</div>
					<div id="bezierMaxCurveHeight"> 
						<label for="maxCurveHeightSlider">Maximum Curve Height</label>
						<input id="maxCurveHeightSlider" class="slider" type ="range" min ="0" max="3000" step ="100" value ="1000"/>
					</div>
					<div id="bezierControlPointOffset"> 
						<label for="controlPointOffsetSlider">Control Point Offset</label>
						<input id="controlPointOffsetSlider" class="slider" type ="range" min ="-2000" max="2000" step ="100" value ="1000"/>
					</div>
					<div id="bezierTrailEffect"> 
						<label for="trailEffectCheckbox">Show Trails</label>
						<input id="trailEffectCheckbox" type ="checkbox" />
					</div>
				</div>
			</div>
			<div id="particleSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="particleCheckbox" /><label for="particleCheckbox"></label>
				</span>
				<span id="particleLabel" class="optLabel"> Particles</span>
				<button type="button" class="expandButton"> </button>
				<div id="particleAdvanced" class="advancedOptions slidehorizontal" > 
					<div id="particlesMaxParticles"> 
						<label for="maxParticleSlider">Maximum Particle Count</label>
						<input id="maxParticleSlider" class="slider" type ="range" min ="0" max="1000" step ="10" value ="100"/>
					</div>
					<div id="particlesLifetime"> 
						<label for="lifetimeSlider">Particle Lifetime</label>
						<input id="lifetimeSlider" class="slider" type ="range" min ="0" max="1000" step ="10" value ="100"/>
					</div>
					<div id="particleColors"> 
						<label for="particleColorCheckbox">Particle Colors</label>
						<input id="particleColorCheckbox" type="checkbox"/>
					</div>
				</div>
			</div>
			<div id="wlineSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="wlineCheckbox" /><label for="wlineCheckbox"></label>
				</span>
				<span id="wlineLabel" class="optLabel"> Waveform Lines </span>
				<button type="button" class="expandButton"> </button>
				<div id="wlineAdvanced" class="advancedOptions slidehorizontal" > 
					<div class = "colorOption">
						<header class="optionHeader">Color</header>
						<span class="colorRadioButtons">
  							<input id="wlineRGBColor" class="colorRadio" type="radio" name="wlineColor" checked>
  							<label for="wlineRGBColor"><span><span></span></span>RGB</label>
  							<input id="wlineHSLColor" class="colorRadio" type="radio" name="wlineColor">
  							<label for="wlineHSLColor"><span><span></span></span>HSL</label>
  							<input id="wlineHexColor" class="colorRadio" type="radio" name="wlineColor">
  							<label for="wlineHexColor"><span><span></span></span>Hex</label>
  						</span>
  						<div class="colorPicker">

  						</div>
  						<span class="colorPreview"> Preview </span>
					</div>
					<div id="wlineScale"> 
						<label for="wlineScaleSlider">Scale</label>
						<input id="wlineScaleSlider" class="slider" type ="range" min ="0" max="100" step ="1" value ="1"/>
					</div>
					<div id="wlineLocation"> 
						<header class="optionHeader"> Location </header>
						<label for="wlineLocationCenterCheckbox">Center</label>
						<input id="wlineLocationCenterCheckbox" type="checkbox" checked />
						<label for="wlineLocationBackgroundCheckbox">Background</label>
						<input id="wlineLocationBackgroundCheckbox" type="checkbox" />
						<label for="wlineLocationOverlayCheckbox">Overlay</label>
						<input id="wlineLocationOverlayCheckbox" type="checkbox"/>
					</div>
				</div>
			</div>
			<div id="eqbarSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="eqbarCheckbox" /><label for="eqbarCheckbox"></label>
				</span>
				<span id="eqbarLabel" class="optLabel"> EQ Bars </span>
				<button type="button" class="expandButton"> </button>
				<div id="eqbarAdvanced" class="advancedOptions slidehorizontal" > 
					<div class = "colorOption">
						<header class="optionHeader">Color</header>
						<span class="colorRadioButtons">
  							<input id="eqbarRGBColor" class="colorRadio" type="radio" name="eqbarColor" checked>
  							<label for="eqbarRGBColor"><span><span></span></span>RGB</label>
  							<input id="eqbarHSLColor" class="colorRadio" type="radio" name="eqbarColor">
  							<label for="eqbarHSLColor"><span><span></span></span>HSL</label>
  							<input id="eqbarHexColor" class="colorRadio" type="radio" name="eqbarColor">
  							<label for="eqbarHexColor"><span><span></span></span>Hex</label>
  						</span>
  						<div class="colorPicker"></div>
  						<span class="colorPreview"> Preview </span>
					</div>
					<div id="eqbarHeight"> 
						<label for="eqbarHeightSlider">Height</label>
						<input id="eqbarHeightSlider" class="slider" type ="range" min ="0" max="1000" step ="10" value ="300"/>
					</div>
					<div id="eqbarWidth"> 
						<label for="eqbarWidthSlider">Width</label>
						<input id="eqbarWidthSlider" class="slider" type ="range" min ="0" max="100" step ="1" value ="10"/>
					</div>
					<div id="eqbarLocation"> 
						<header class="optionHeader"> Location </header>
						<label for="eqbarLocationCenterCheckbox">Center</label>
						<input id="eqbarLocationCenterCheckbox" type="checkbox" checked />
						<label for="eqbarLocationBackgroundCheckbox">Background</label>
						<input id="eqbarLocationBackgroundCheckbox" type="checkbox" />
						<label for="eqbarLocationOverlayCheckbox">Overlay</label>
						<input id="eqbarLocationOverlayCheckbox" type="checkbox"/>
						<label for="eqbarLocationBottomCheckbox">Bottom</label>
						<input id="eqbarLocationBottomCheckbox" type="checkbox"/>
						<label for="eqbarLocationTopCheckbox">Top</label>
						<input id="eqbarLocationTopCheckbox" type="checkbox"/>
					</div>
				</div>
			</div>
			<div id="dynamicBgSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="dynamicBgCheckbox" /><label for="dynamicBgCheckbox"></label>
				</span>
				<span id="dynamicBgLabel" class="optLabel"> Dynamic Background </span>
				<button type="button" class="expandButton"> </button>
				<div id="dynamicBgAdvanced" class="advancedOptions slidehorizontal" >
					<div id="dynamicBgType"> 
						<header class="optionHeader">Type</header>
						<label for="dynamicBgTypeGradient">Gradient</label>
						<input id="dynamicBgTypeGradient" type="radio" checked />
						<label for="dynamicBgTypeVideo">Video</label>
						<input id="dynamicBgTypeVideo" type="radio" />
						<label for="dynamicBgTypeSpectogram">Spectogram</label>
						<input id="dynamicBgTypeSpectogram" type="radio"/>
					</div>
			    </div>
			</div>
		</section>
		<button id="resetButton" type="button">Reset to Defaults</button>
	</section>
</body>
</html>
