<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Audio Visualizer</title>
	<link rel = "stylesheet" type = "text/css" href = "css/generated.css" />
	<link rel = "stylesheet" type = "text/css" href = "css/ui.css" />
	<style>

	html, body {
  		width:  	100%;
  		height: 	100%;
  		margin: 	0px;
  		overflow: 	hidden;
  		background: #f2f2f2;

	}
	#backgroundCanvas{
		z-index: 0;
		position:fixed;
	}

	#midgroundCanvas{
		z-index:1;
		position:fixed;
	}
	#foregroundCanvas{
		z-index: 3;
		position:fixed;
	} 
    #mainCanvas {
        z-index:  2;
        position: fixed;
    }


	</style>
	<script type="text/javascript" src="src/audiomanager.js"></script>
	<script type="text/javascript" src="src/uimanager.js"></script>
	<script type="text/javascript" src="src/visualizermanager.js"></script>
	<script type="text/javascript" src="src/utilities.js"></script>
	<script>

	var tracks = ["Berlin", "Radio Protector", "Seatbelt Hands", "We Can Make The World Stop", "Yuna's Ballad", "Fireflies and Empty Skies"];
	(function(){
		"use strict";

		function init(){			
			application.audio.initializeAudio();
			application.audio.setStream("tracks/Berlin.mp3");
			application.ui.initializeUI();
			application.visualizer.initializeVisualizer();

			// start animation loop
			update();
		}
				
		function update() { 
			// animate at 60fps
			requestAnimationFrame(update);

			application.visualizer.update();
			
		} 
		
		 // FULL SCREEN MODE
		function requestFullscreen(element) {
			if (element.requestFullscreen) {
			  element.requestFullscreen();
			} else if (element.mozRequestFullscreen) {
			  element.mozRequestFullscreen();
			} else if (element.mozRequestFullScreen) { // camel-cased 'S' was changed to 's' in spec
			  element.mozRequestFullScreen();
			} else if (element.webkitRequestFullscreen) {
			  element.webkitRequestFullscreen();
			}
			// .. and do nothing if the method is not supported
		};
		
		
		window.onload=init;
	}());
		
	</script>
</head>
<body>
	<canvas id="mainCanvas"></canvas>
	<canvas id="foregroundCanvas"></canvas>
	<canvas id="backgroundCanvas"></canvas>
	<canvas id="midgroundCanvas"></canvas>
	<div id="bottomsensor">
		
		<section id="controls" class = "slide" >
			<div id="controlsBG"></div>
			<!-- These are all positioned absolutely, so it doesn't matter what order they're in, but I put them from left to right to satisfy my own neurosis. -->
			<button id = "showOptionsButton" title="Show/Hide Settings Menu"> <img src="media/hamburglarwhite.png" height=40 width=40 alt="Show Options"> </button>
			<div id="playbackControls">
				<button id="playButton" type="button"><img src="media/playcirclewhite.png" height=30 width=30 alt="Play"></button>
				<div id="trackControl" >
					<ul id="trackList" class="slide" > </ul>
					<div id="trackSelect">
						<span id="currentTrack">Select a Track</span>
					</div>
				</div>
				<span id="volumeControl">
					<label for="volumeSlider" id = "volumeIcon"><img src="media/volumeiconwhite.png" height=20 width=20 alt="Volume"/> </label>
					<input id="volumeSlider" class="slider" type ="range" min ="0" max="1.0" step =".001" value =".2"/>
				</span>
			</div>
			<button id="hideButton" title="Pin/Unpin the Control Panel" type="button"><img src="media/unpinwhite.png" height=30 width=30 alt="Unpin Controls"></button>
		</section>
	</div>





	<section id="options" class="slide">

		<section id="equalizerSettings">
			<header> Equalizer Settings </header>
			<div id="gainControl" class="eqControl">
				<label for="gainSlider" id = "gainLabel">Gain</label>
				<input id="gainSlider" class="slider" type ="range" min ="0" max="2.0" step =".01" value ="1"/>
			</div>
			<!-- pabst blue ribbon control -->
			<!-- alternatively, physically based rendering control if you're a NERD -->
			<!-- it's actually playback rate though -->
			<div id="pbrControl" class="eqControl">
				<label for="pbrSlider" id = "pbrLabel">Playback Rate</label>
				<input id="pbrSlider" class="slider" type ="range" min ="-2" max="2" step =".01" value ="1"/>
			</div>
			<div id="bassControl" class="eqControl">
				<label for="bassSlider" id = "bassLabel">Bass</label>
				<input id="bassSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="lowControl" class="eqControl">
				<label for="lowSlider" id = "lowLabel">Low</label>
				<input id="lowSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="midControl" class="eqControl">
				<label for="midSlider" id = "midLabel">Mid</label>
				<input id="midSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="highControl" class="eqControl">
				<label for="highSlider" id = "highLabel">High</label>
				<input id="highSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="presenceControl" class="eqControl">
				<label for="presenceSlider" id = "highLabel">Presence</label>
				<input id="presenceSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="brillianceControl" class="eqControl">
				<label for="brillianceSlider" id = "brillianceLabel">Brilliance</label>
				<input id="brillianceSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
			<div id="reverbControl" class="eqControl">
				<label for="reverbSlider" id = "reverbLabel">Reverb</label>
				<input id="reverbSlider" class="slider" type ="range" min ="0" max="5.0" step =".01" value ="1"/>
			</div>
		</section>







		<section id="visualizationSettings">
			<header> Visualization Settings </header>


			<div id="bezierCurveSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="bezierCurveCheckbox" /><label for="bezierCurveCheckbox"></label>
				</span>
				<span id="bezierCurveLabel" class="optLabel"> Bezier Curves</span>
				<button type="button" class="expandButton"> <img src="media/settingsgearwhite.png" height=20 width=20 alt="Advanced Settings"></button>
				<div id="bezierCurveAdvanced" class="advancedOptions slidehorizontal">
					<div class = "advancedOptionsWrapper">
					<div class = "colorOption">
						<header class="colorHeader">Color</header>
						<span class="colorRadioButtons">
  							<input id="bezierRGBColor" class="colorRadio" type="radio" name="bezierColor" checked>
  							<label for="bezierRGBColor"><span><span></span></span>RGB</label>
  							<input id="bezierHSLColor" class="colorRadio" type="radio" name="bezierColor">
  							<label for="bezierHSLColor"><span><span></span></span>HSL</label>
  							<input id="bezierHexColor" class="colorRadio" type="radio" name="bezierColor">
  							<label for="bezierHexColor"><span><span></span></span>Hex</label>
  						</span>
  						<div class="colorPicker" id="bezierColorPicker">

  						</div>
  						<span class="colorPreview"></span>
					</div>
					<header class="optionHeader">Adjustments</header>
					<div id="bezierMaxCurveHeight"> 
						<label for="maxCurveHeightSlider">Maximum Curve Height</label>
						<input id="maxCurveHeightSlider" class="slider" type ="range" min ="0" max="3000" step ="100" value ="1000"/>
					</div>
					<div id="bezierControlPointOffset"> 
						<label for="controlPointOffsetSlider">Control Point Offset</label>
						<input id="controlPointOffsetSlider" class="slider" type ="range" min ="900" max="1100" step ="10" value ="1000"/>
					</div>
					<div id="bezierTrailEffect"> 
						<header class = "optionHeader">Trails</header>
						<span class="checkSwitch">
							<input id="trailEffectCheckbox" type ="checkbox" /> <label for="trailEffectCheckbox"></label>
						</span>
						
					</div>
					</div>
				</div>
			</div>

			<div id="eqbarSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="eqbarCheckbox" /><label for="eqbarCheckbox"></label>
				</span>
				<span id="eqbarLabel" class="optLabel"> EQ Bars </span>
				<button type="button" class="expandButton"><img src="media/settingsgearwhite.png" height=20 width=20 alt="Advanced Settings"> </button>
				<div id="eqbarAdvanced" class="advancedOptions slidehorizontal" > 
					<div class = "advancedOptionsWrapper">
					<div class = "colorOption">
						<header class="colorHeader">Color</header>
						<span class="colorRadioButtons">
  							<input id="eqbarRGBColor" class="colorRadio" type="radio" name="eqbarColor" checked>
  							<label for="eqbarRGBColor"><span><span></span></span>RGB</label>
  							<input id="eqbarHSLColor" class="colorRadio" type="radio" name="eqbarColor">
  							<label for="eqbarHSLColor"><span><span></span></span>HSL</label>
  							<input id="eqbarHexColor" class="colorRadio" type="radio" name="eqbarColor">
  							<label for="eqbarHexColor"><span><span></span></span>Hex</label>
  						</span>
  						<div class="colorPicker" id="eqbarColorPicker"></div>
  						<span class="colorPreview"></span>
					</div>
					<div id="eqbarAppearance"> 
						<header class="optionHeader">Appearance</header>
						
						<input id="eqbarAppearanceRectangular" name="eqBarAppearance" type="radio" checked value="Rectangular"/>
						<label for="eqbarAppearanceRectangular">Rectangular</label>
						<input id="eqbarAppearanceRounded" name="eqBarAppearance" type="radio" value="Rounded"/>
						<label for="eqbarAppearanceRounded">Rounded</label>
						<input id="eqbarAppearanceLine" name="eqBarAppearance" type="radio" value="Line"/>
						<label for="eqbarAppearanceLine">Line</label>
					</div>
					<div id="eqbarLocation"> 
						<header class="optionHeader"> Location </header>
						<input id="eqbarLocationCenter" name="eqBarLocation" type="radio" checked value = "Center"/>
						<label for="eqbarLocationCenter">Center</label>
						<input id="eqbarLocationBackground" name="eqBarLocation" type="radio" value="Background"/>
						<label for="eqbarLocationBackground">Background</label>
						<input id="eqbarLocationBottom" name="eqBarLocation" type="radio" value="Bottom"/>
						<label for="eqbarLocationBottom">Bottom</label>
						<input id="eqbarLocationTop" name="eqBarLocation" type="radio" value="Top"/>
						<label for="eqbarLocationTop">Top</label>
					</div>
					<header class="optionHeader">Adjustments</header>
					<div id="eqbarHeight"> 
						<label for="eqbarHeightSlider">Height</label>
						<input id="eqbarHeightSlider" class="slider" type ="range" min ="0" max="1000" step ="10" value ="300"/>
					</div>
					</div>
				</div>
			</div>

			<div id="particleSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="particleCheckbox" /><label for="particleCheckbox"></label>
				</span>
				<span id="particleLabel" class="optLabel"> Particles</span>
				<button type="button" class="expandButton"> <img src="media/settingsgearwhite.png" height=20 width=20 alt="Advanced Settings"></button>
				<div id="particleAdvanced" class="advancedOptions slidehorizontal" >
					<div class = "advancedOptionsWrapper"> 
					<div id="particleColors"> 
						<header class="optionHeader">Particle Colors</header>
						<input id="particleColorCheckbox" value="" type="checkbox"/>
						<input id="particleColorCheckbox" value="" type="checkbox"/>
						<input id="particleColorCheckbox" value="" type="checkbox"/>
						<input id="particleColorCheckbox" value="" type="checkbox"/>
						<input id="particleColorCheckbox" value="" type="checkbox"/>
						<input id="particleColorCheckbox" value="" type="checkbox"/>
					</div>
					<header class="optionHeader">Adjustments</header>
					<div id="maxParticles"> 
						<label for="maxParticleSlider">Maximum Particle Count</label>
						<input id="maxParticleSlider" class="slider" type ="range" min ="0" max="500" step ="10" value ="200"/>
					</div>
					<div id="particlesLifetime"> 
						<label for="lifetimeSlider">Particle Lifetime</label>
						<input id="lifetimeSlider" class="slider" type ="range" min ="0" max="300" step ="10" value ="100"/>
					</div>
					</div>
				</div>
			</div>


			<div id="wlineSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="wlineCheckbox" /><label for="wlineCheckbox"></label>
				</span>
				<span id="wlineLabel" class="optLabel"> Waveform Lines </span>
				<button type="button" class="expandButton"><img src="media/settingsgearwhite.png" height=20 width=20 alt="Advanced Settings"> </button>
				<div id="wlineAdvanced" class="advancedOptions slidehorizontal" > 
					<div class = "advancedOptionsWrapper">
					<div class = "colorOption">
						<header class="colorHeader">Color</header>
						<span class="colorRadioButtons">
  							<input id="wlineRGBColor" class="colorRadio" type="radio" name="wlineColor" checked>
  							<label for="wlineRGBColor"><span><span></span></span>RGB</label>
  							<input id="wlineHSLColor" class="colorRadio" type="radio" name="wlineColor">
  							<label for="wlineHSLColor"><span><span></span></span>HSL</label>
  							<input id="wlineHexColor" class="colorRadio" type="radio" name="wlineColor">
  							<label for="wlineHexColor"><span><span></span></span>Hex</label>
  						</span>
  						<div class="colorPicker" id="wlineColorPicker">

  						</div>
  						<span class="colorPreview"></span>
					</div>
					<div id="wlineLocation"> 
						<header class="optionHeader"> Location </header>
						
						<input id="wlineLocationCenter" name="wlineLocation" type="radio" value="Center"/>
						<label for="wlineLocationCenter">Center</label>
						<input id="wlineLocationBackground" name="wlineLocation" type="radio" checked value="Background"/>
						<label for="wlineLocationBackground">Background</label>
						<input id="wlineLocationOverlay" name="wlineLocation" type="radio" value="Overlay"/>
						<label for="wlineLocationOverlay">Overlay</label>
					</div>
					<header class="optionHeader">Adjustments</header>
					<div id="wlineScale"> 
						<label for="wlineScaleSlider">Waveform Scale</label>
						<input id="wlineScaleSlider" class="slider" type ="range" min ="100" max="600" step ="20" value ="300"/>
					</div>
					
					</div>
				</div>
			</div>


			<div id="dynamicBgSettings" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="dynamicBgCheckbox" /><label for="dynamicBgCheckbox"></label>
				</span>
				<span id="dynamicBgLabel" class="optLabel"> Dynamic Background </span>
				<button type="button" class="expandButton"> <img src="media/settingsgearwhite.png" height=20 width=20 alt="Advanced Settings"></button>
				<div id="dynamicBgAdvanced" class="advancedOptions slidehorizontal" >
					<div class = "advancedOptionsWrapper">
					<div id="dynamicBgType"> 
						<header class="optionHeader">Type</header>
						<input id="dynamicBgTypeGradient" name="dynamicBgType" type="radio" checked value="Gradient"/>
						<label for="dynamicBgTypeGradient">Gradient</label>
						<input id="dynamicBgTypeVideo" name="dynamicBgType" type="radio" value="Video"/>
						<label for="dynamicBgTypeVideo">Video</label>
						<input id="dynamicBgTypeSpectogram" name="dynamicBgType" type="radio" value="Spectogram"/>
						<label for="dynamicBgTypeSpectogram">Spectogram</label>
					</div>
					</div>
			    </div>
			</div>

			<div id="invertSetting" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="invertCheckbox" /><label for="invertCheckbox"></label>
				</span>
				<span id="invertLabel" class="optLabel"> Invert </span>
			</div>

			<div id="greyscaleSetting" class="visOption">
				<span class="checkSwitch">
					<input type="checkbox" id="greyscaleCheckbox" /><label for="greyscaleCheckbox"></label>
				</span>
				<span id="invertLabel" class="optLabel"> Greyscale </span>
			</div>

		</section>
		<button id="resetButton" type="button">Reset to Defaults</button>
	</section>
</body>
</html>
